{"version":3,"file":"storybook-prebuilt-18d036fd.js","sources":["../node_modules/@storybook/channels/dist/esm/index.js"],"sourcesContent":["import \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/web.immediate.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport deprecate from 'util-deprecate';\nimport dedent from 'ts-dedent';\n\nvar generateRandomId = function generateRandomId() {\n  // generates a random 13 character string\n  return Math.random().toString(16).slice(2);\n};\n\nexport var Channel = /*#__PURE__*/function () {\n  function Channel() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        transport = _ref.transport,\n        _ref$async = _ref.async,\n        async = _ref$async === void 0 ? false : _ref$async;\n\n    _classCallCheck(this, Channel);\n\n    this.isAsync = void 0;\n    this.sender = generateRandomId();\n    this.events = {};\n    this.data = {};\n    this.transport = void 0;\n    this.addPeerListener = deprecate(function (eventName, listener) {\n      _this.addListener(eventName, listener);\n    }, dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      channel.addPeerListener is deprecated\\n    \"]))));\n    this.isAsync = async;\n\n    if (transport) {\n      this.transport = transport;\n      this.transport.setHandler(function (event) {\n        return _this.handleEvent(event);\n      });\n    }\n  }\n\n  _createClass(Channel, [{\n    key: \"hasTransport\",\n    get: function get() {\n      return !!this.transport;\n    }\n  }, {\n    key: \"addListener\",\n    value: function addListener(eventName, listener) {\n      this.events[eventName] = this.events[eventName] || [];\n      this.events[eventName].push(listener);\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(eventName) {\n      var _this2 = this;\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var event = {\n        type: eventName,\n        args: args,\n        from: this.sender\n      };\n      var options = {};\n\n      if (args.length >= 1 && args[0] && args[0].options) {\n        options = args[0].options;\n      }\n\n      var handler = function handler() {\n        if (_this2.transport) {\n          _this2.transport.send(event, options);\n        }\n\n        _this2.handleEvent(event);\n      };\n\n      if (this.isAsync) {\n        // todo I'm not sure how to test this\n        setImmediate(handler);\n      } else {\n        handler();\n      }\n    }\n  }, {\n    key: \"last\",\n    value: function last(eventName) {\n      return this.data[eventName];\n    }\n  }, {\n    key: \"eventNames\",\n    value: function eventNames() {\n      return Object.keys(this.events);\n    }\n  }, {\n    key: \"listenerCount\",\n    value: function listenerCount(eventName) {\n      var listeners = this.listeners(eventName);\n      return listeners ? listeners.length : 0;\n    }\n  }, {\n    key: \"listeners\",\n    value: function listeners(eventName) {\n      var listeners = this.events[eventName];\n      return listeners || undefined;\n    }\n  }, {\n    key: \"once\",\n    value: function once(eventName, listener) {\n      var onceListener = this.onceListener(eventName, listener);\n      this.addListener(eventName, onceListener);\n    }\n  }, {\n    key: \"removeAllListeners\",\n    value: function removeAllListeners(eventName) {\n      if (!eventName) {\n        this.events = {};\n      } else if (this.events[eventName]) {\n        delete this.events[eventName];\n      }\n    }\n  }, {\n    key: \"removeListener\",\n    value: function removeListener(eventName, listener) {\n      var listeners = this.listeners(eventName);\n\n      if (listeners) {\n        this.events[eventName] = listeners.filter(function (l) {\n          return l !== listener;\n        });\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, listener) {\n      this.addListener(eventName, listener);\n    }\n  }, {\n    key: \"off\",\n    value: function off(eventName, listener) {\n      this.removeListener(eventName, listener);\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      var listeners = this.listeners(event.type);\n\n      if (listeners && listeners.length) {\n        listeners.forEach(function (fn) {\n          fn.apply(event, event.args);\n        });\n      }\n\n      this.data[event.type] = event.args;\n    }\n  }, {\n    key: \"onceListener\",\n    value: function onceListener(eventName, listener) {\n      var _this3 = this;\n\n      var onceListener = function onceListener() {\n        _this3.removeListener(eventName, onceListener);\n\n        return listener.apply(void 0, arguments);\n      };\n\n      return onceListener;\n    }\n  }]);\n\n  return Channel;\n}();\nexport default Channel;"],"names":["_templateObject","_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","key","generateRandomId","Math","random","toString","Channel","_this","this","_ref","arguments","undefined","transport","_ref$async","async","isAsync","sender","events","data","addPeerListener","deprecate","eventName","listener","addListener","dedent","setHandler","event","handleEvent","protoProps","staticProps","get","push","_this2","_len","args","Array","_key","type","from","options","handler","send","setImmediate","keys","listeners","onceListener","filter","l","removeListener","forEach","fn","apply","_this3","prototype"],"mappings":"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"}