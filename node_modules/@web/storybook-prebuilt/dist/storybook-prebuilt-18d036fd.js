import{b as e}from"./storybook-prebuilt-9cbe2957.js";import{d as t}from"./storybook-prebuilt-7770f82f.js";var n;function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){return Math.random().toString(16).slice(2)},o=function(){function o(){var i=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=u.transport,l=u.async,c=void 0!==l&&l;s(this,o),this.isAsync=void 0,this.sender=a(),this.events={},this.data={},this.transport=void 0,this.addPeerListener=e((function(e,t){i.addListener(e,t)}),t(n||(n=r(["\n      channel.addPeerListener is deprecated\n    "])))),this.isAsync=c,v&&(this.transport=v,this.transport.setHandler((function(e){return i.handleEvent(e)})))}var u,v,l;return u=o,v=[{key:"hasTransport",get:function(){return!!this.transport}},{key:"addListener",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var i={type:e,args:r,from:this.sender},a={};r.length>=1&&r[0]&&r[0].options&&(a=r[0].options);var o=function(){t.transport&&t.transport.send(i,a),t.handleEvent(i)};this.isAsync?setImmediate(o):o()}},{key:"last",value:function(e){return this.data[e]}},{key:"eventNames",value:function(){return Object.keys(this.events)}},{key:"listenerCount",value:function(e){var t=this.listeners(e);return t?t.length:0}},{key:"listeners",value:function(e){var t=this.events[e];return t||void 0}},{key:"once",value:function(e,t){var n=this.onceListener(e,t);this.addListener(e,n)}},{key:"removeAllListeners",value:function(e){e?this.events[e]&&delete this.events[e]:this.events={}}},{key:"removeListener",value:function(e,t){var n=this.listeners(e);n&&(this.events[e]=n.filter((function(e){return e!==t})))}},{key:"on",value:function(e,t){this.addListener(e,t)}},{key:"off",value:function(e,t){this.removeListener(e,t)}},{key:"handleEvent",value:function(e){var t=this.listeners(e.type);t&&t.length&&t.forEach((function(t){t.apply(e,e.args)})),this.data[e.type]=e.args}},{key:"onceListener",value:function(e,t){var n=this,r=function r(){return n.removeListener(e,r),t.apply(void 0,arguments)};return r}}],v&&i(u.prototype,v),l&&i(u,l),o}(),u=o,v=Object.freeze({__proto__:null,Channel:o,default:u});export{u as C,o as a,v as e};
//# sourceMappingURL=storybook-prebuilt-18d036fd.js.map
